<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Developer7452 Página Web</title>
    <style>
        html, body {
            height: 100%;
        }
        
        body {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            background-color: #333;
            color: #fff;
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
        }

        .footer {
            background-color: #444;
            text-align: center;
            padding: 5px;
            position: relative;
            bottom: 0;
            width: 100%;
        }

       header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 10px;
    background-color: #2c2c2c;
}

.navbar {
    display: flex;
    width: 100%;
    justify-content: space-between;
    align-items: center;
}

.menu-icon {
    font-size: 24px;
    cursor: pointer;
}

.login-container {
    display: flex;
    align-items: center;
}

.profile-info {
    display: flex;
    align-items: center;
    gap: 10px;
}

.profile-pic {
    width: 40px;
    height: 40px;
    border-radius: 50%;
}

//

.profile-container {
    display: flex;
    align-items: center;
}

.header-title {
    font-size: 24px;
    color: #fff;
    margin: 0 auto;
    text-align: center;
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
}

.menu-container {
    display: flex;
    align-items: center;
}

.menu {
    display: none;
    flex-direction: column;
    background-color: #444;
    position: absolute;
    top: 60px;
    right: 20px;    
    border-radius: 5px;
    z-index: 1000;
}

.menu-item {
    padding: 10px 20px;
    color: #fff;
    text-decoration: none;
    border-bottom: 1px solid #555;
}

.menu-item:hover {
    background-color: #555;
}

.menu-toggle {
    cursor: pointer;
    background-color: #444;
    padding: 10px;
    border-radius: 5px;
}

.login-container button {
    cursor: pointer;
    background-color: #444;
    padding: 10px;
    border-radius: 5px;
    color: #fff;
}

        @media (max-width: 768px) {
            .header-title {
                font-size: 18px;
            }
        }

        .addons-container {
            background-color: #444;
            padding: 20px;
            border-radius: 8px;
            margin: 20px;
        }

        .addons-scroll {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            max-height: 300px;
            overflow-y: hidden;
            transition: max-height 0.3s ease;
        }

        .addon {
            padding: 10px;
            background-color: #555;
            border-radius: 5px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }

        .addon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 5px;
        }

        .footer {
            background-color: #444;
            text-align: center;
            padding: 5px;
            position: relative;
            bottom: 10px;
            width: 100%;
        }

        .social-links {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin-bottom: 1px;
        }

        .social-links img {
            width: 60px;
            height: auto;
        }
    </style>
</head>
<body>
<header>
    <!-- Información del perfil (por defecto oculta) -->
    <div class="profile-info" id="profileInfo" style="display: none;">
        <div class="profile-container">
            <img src="" id="profileImage" class="profile-pic" alt="Imagen de perfil">
            <span id="displayName"></span>
        </div>
    </div>

    <h1 class="header-title">Developer7452 Página Web</h1>

    <div class="menu-container">
        <!-- Menú de tres rayas (íconos de menú) -->
        <div class="menu-toggle" onclick="toggleMenu()">☰</div>
        <div class="menu" id="menu">
            <a href="comprar.html" class="menu-item">Comprar</a>
            <a href="developer7452.html" class="menu-item">Developer7452</a>
            <a href="hud_screen.html" class="menu-item">Hud_screen</a>
        </div>
    </div>

    <!-- Botón de Login (visible solo si el usuario no está logueado) -->
    <div class="login-container">
        <button id="loginButton" onclick="loginWithDiscord()">Login</button>
    </div>
</header>

<div class="addons-container" id="addonsContainer">
    <h2>Addons de Developer7452</h2>
    <div class="addons-scroll" id="addonsScroll">
        <div class="addon">
            <img src="addon1.png" alt="Addon 1">
            <h3>UI de Dedsafio 3</h3>
            <p>Esta UI está hecha para recrear el cliente de Dedsafio</p>
            <a href="https://link-center.net/596250/dedsafio-3-ui-low-version">Link de descarga</a>
        </div>
        <div class="addon">
            <img src="totem.png" alt="Addon 2">
            <h3>Fast Totem</h3>
            <p>Este addon está hecho para equiparte rápido el totem</p>
            <a href="link-addon2">Link de descarga</a>
        </div>
        <div class="addon">
            <img src="addon3.png" alt="Addon 3">
            <h3>Addon 3</h3>
            <p>Descripción del Addon 3.</p>
            <a href="link-addon3">Link de descarga</a>
        </div>
        <div class="addon">
            <img src="addon4.png" alt="Addon 4">
            <h3>Addon 4</h3>
            <p>Descripción del Addon 4.</p>
            <a href="link-addon4">Link de descarga</a>
        </div>
        <div class="addon">
            <img src="addon5.png" alt="Addon 5">
            <h3>Addon 5</h3>
            <p>Descripción del Addon 5.</p>
            <a href="link-addon5">Link de descarga</a>
        </div>
    </div>
</div>

<div class="footer">
    <div class="social-links">
        <a href="https://discord.gg/qXmRGqNV5T" target="_blank">
            <img src="discord.png" alt="Discord">
        </a>
        <a href="https://youtube.com/@developer-7452?si=B7OZrjGBbgobFJV5" target="_blank">
            <img src="youtube.png" alt="YouTube">
        </a>
        <a href="https://x.com/Developer7452?t=KLm1dIgczPQzuSKrrwa4Mw&s=09" target="_blank">
            <img src="twitter.png" alt="Twitter">
        </a>
    </div>
    <p>© Copyright Developer7452</p>
</div>

<script>
const CLIENT_ID = '1312966920907133028'; // Reemplaza con tu client ID de Discord

const REDIRECT_URI = 'https://developer-7452.github.io/Devepage/'; // Reemplaza con tu URI de redirección

const CLIENT_SECRET = 'p7vZmatuGEMcogSBJ8A1v4Xs4GLPhtEn'; // Reemplaza con tu client secret de Discord

const API_BASE = 'https://discord.com/api';

// Redirigir al usuario a la URL de OAuth2 de Discord para el inicio de sesión
function loginWithDiscord() {
    const oauthUrl = `${API_BASE}/oauth2/authorize?client_id=${CLIENT_ID}&redirect_uri=${encodeURIComponent(REDIRECT_URI)}&response_type=code&scope=identify`;
    window.location.href = oauthUrl;
}

// Al cargar la página, revisar si hay un código de autenticación en la URL
window.onload = async function() {
    const urlParams = new URLSearchParams(window.location.search);
    const code = urlParams.get('code');

    if (code) {
        // Si hay un código, solicitar el token de acceso
        await fetchDiscordUserData(code);
    }
}

// Función para obtener el token de acceso y los datos del usuario
async function fetchDiscordUserData(code) {
    try {
        const tokenResponse = await fetch(`${API_BASE}/oauth2/token`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            body: new URLSearchParams({
                client_id: CLIENT_ID,
                client_secret: CLIENT_SECRET,
                code: code,
                grant_type: 'authorization_code',
                redirect_uri: REDIRECT_URI,
                scope: 'identify'
            })
        });

        const tokenData = await tokenResponse.json();

        if (tokenData.access_token) {
            // Obtener los datos del usuario
            const userResponse = await fetch(`${API_BASE}/v10/users/@me`, {
                headers: {
                    'Authorization': `Bearer ${tokenData.access_token}`
                }
            });

            const userData = await userResponse.json();
            mostrarPerfil(userData);

        } else {
            console.error('Error al obtener el token de acceso:', tokenData);
        }
    } catch (error) {
        console.error('Error al autenticar con Discord:', error);
    }
}

// Mostrar la información del perfil del usuario
function mostrarPerfil(userData) {
    const profileInfo = document.getElementById("profileInfo");
    const profileImage = document.getElementById("profileImage");
    const displayName = document.getElementById("displayName");

    if (profileInfo && profileImage && displayName) {
        profileImage.src = `https://cdn.discordapp.com/avatars/${userData.id}/${userData.avatar}.png`;
        displayName.textContent = userData.username;

        // Mostrar la información del perfil
        profileInfo.style.display = "flex";

        // Ocultar el botón de login
        document.getElementById("loginButton").style.display = "none";
    } else {
        console.error("No se pudieron cargar los elementos del perfil.");
    }
}
</script>

    <script>
        function toggleMenu() {
            const menu = document.getElementById("menu");
            menu.style.display = menu.style.display === "flex" ? "none" : "flex";
        }

        function toggleRegister() {
            const registerForm = document.getElementById("registerForm");
            registerForm.style.display = registerForm.style.display === "block" ? "none" : "block";
        }

        function registerUser() {
            const profilePic = document.getElementById("profilePic").files[0];
            const userName = document.getElementById("userName").value;
            const password = document.getElementById("password").value;

            if (!profilePic || !userName || !password) {
                alert("Por favor completa todos los campos.");
                return;
            }

            // Muestra la imagen de perfil y el nombre
            const reader = new FileReader();
            reader.onload = function(e) {
                document.getElementById("profileImage").src = e.target.result;
                document.getElementById("profileImage").src = e.target.result;
                document.getElementById("displayName").textContent = userName;
                document.getElementById("profileInfo").style.display = "flex"; // Muestra la información del perfil
                document.getElementById("registerBtn").style.display = "none"; // Oculta el botón de registro
                document.getElementById("registerForm").style.display = "none"; // Oculta el formulario de registro
            };
            reader.readAsDataURL(profilePic);
        }
           // Ajusta la altura de la sección de addons
        function adjustAddonsHeight() {
            const addonsScroll = document.getElementById("addonsScroll");

            // Verifica si el contenido de addons sobrepasa el límite de altura
            if (addonsScroll.scrollHeight > 300) {
                addonsScroll.style.maxHeight = "300px"; // Limitar altura
                addonsScroll.style.overflowY = "auto"; // Habilitar desplazamiento
            } else {
                addonsScroll.style.maxHeight = addonsScroll.scrollHeight + "px"; // Ajustar altura al contenido
                addonsScroll.style.overflowY = "hidden"; // Desactivar desplazamiento
            }
        }

        // Llama a la función para ajustar la altura de addons al cargar la página
        window.onload = adjustAddonsHeight;
    </script>
</body>
</html>
